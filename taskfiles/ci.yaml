version: '3'


tasks:
  lint-dags:
    desc: "run isort, black, and flake8 to lint dags"
    cmds:
      - pip install isort black flake8
      - isort --check-only dags
      - black --check dags
      - flake8 dags
  mypy-dags:
    desc: "run mypy on dags"
    cmds:
      - pip install pip-tools
      - pip-compile
      - pip-sync
      - pip install mypy types-requests
      - mypy  --namespace-packages --explicit-package-bases src/
    env:
      PYTHON_PATH: ./src
  scan-dags:
    desc: "Run xenon on dags"
    cmds:
      - pip install xenon
      - xenon -b B -m A -a A src/
  test-dags:
    desc: "Run Pytest on dags"
    cmds:
      - pip install pip-tools
      - pip-compile
      - pip-sync
      - pip install pytest
      - pytest .

